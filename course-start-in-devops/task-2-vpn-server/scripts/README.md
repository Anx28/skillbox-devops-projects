# OpenVPN Unified Manager

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OpenVPN‚Äë—Å–µ—Ä–≤–µ—Ä–æ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Easy‚ÄëRSA –∏ –≤–Ω–µ—à–Ω–µ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–µ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ (CA).

> üìò –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞: [Anx28 / skillbox-devops-projects / task‚Äë2‚Äëvpn‚Äëserver / scripts](https://github.com/Anx28/skillbox-devops-projects/tree/main/course-start-in-devops/task-2-vpn-server/scripts)

---

## üß© –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenVPN –∏ Easy‚ÄëRSA
* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ CSR –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ CA
* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–ª—é—á–µ–π –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenVPN‚Äë—Å–µ—Ä–≤–µ—Ä–∞, IP‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥–∞ –∏ NAT
* –°–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö `.ovpn`‚Äë–ø—Ä–æ—Ñ–∏–ª–µ–π –∫–ª–∏–µ–Ω—Ç–æ–≤
* –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–∏–º —Ü–µ–Ω—Ç—Ä–æ–º

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
sudo apt update && sudo apt install git -y
git clone https://github.com/Anx28/skillbox-devops-projects.git
cd skillbox-devops-projects/course-start-in-devops/task-2-vpn-server/scripts
sudo chmod +x openvpn-manager.sh
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenVPN –∏ Easy‚ÄëRSA

```bash
sudo bash openvpn-manager.sh --install
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ CSR

```bash
sudo bash openvpn-manager.sh --gen-server
```

> ‚ö†Ô∏è –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `/tmp/server.req` –Ω–∞ CA‚Äë—Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–¥–ø–∏—à–∏—Ç–µ –µ–≥–æ —Å –ø–æ–º–æ—â—å—é `sign-server-cert-simple.sh`. –ó–∞—Ç–µ–º –≤–µ—Ä–Ω–∏—Ç–µ `server.crt` –∏ `ca.crt` –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ VPN‚Äë—Å–µ—Ä–≤–µ—Ä.

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ OpenVPN

```bash
sudo bash openvpn-manager.sh --configure
```

–°–∫—Ä–∏–ø—Ç:

* —Å–æ–∑–¥–∞—ë—Ç `/etc/openvpn/server.conf`
* –≤–∫–ª—é—á–∞–µ—Ç IP‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥ –∏ NAT
* –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–ª—É–∂–±—É OpenVPN (`systemctl enable/start openvpn@server`)

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ CSR

```bash
sudo bash openvpn-manager.sh --gen-client alice
```

> ‚ö†Ô∏è –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `/tmp/alice.req` –Ω–∞ CA‚Äë—Å–µ—Ä–≤–µ—Ä, –ø–æ–¥–ø–∏—à–∏—Ç–µ –∏ –≤–µ—Ä–Ω–∏—Ç–µ `alice.crt` + `ca.crt` –æ–±—Ä–∞—Ç–Ω–æ.

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ `.ovpn`‚Äë–ø—Ä–æ—Ñ–∏–ª—è

```bash
sudo bash openvpn-manager.sh --package-client alice
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª:

```
/etc/openvpn/clients/alice.ovpn
```

–ï–≥–æ –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ OpenVPN GUI –∏–ª–∏ –º–æ–±–∏–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç.

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
sudo bash openvpn-manager.sh --status
```

---

## üß† –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

| –≠—Ç–∞–ø | –°–µ—Ä–≤–µ—Ä | –ö–æ–º–∞–Ω–¥–∞                                      |
| ---- | ------ | -------------------------------------------- |
| 1    | VPN    | `--install`                                  |
| 2    | VPN    | `--gen-server`                               |
| 3    | CA     | `sign-server-cert-simple.sh /tmp/server.req` |
| 4    | VPN    | `--configure`                                |
| 5    | VPN    | `--gen-client alice`                         |
| 6    | CA     | `sign-client-cert.sh /tmp/alice.req`         |
| 7    | VPN    | `--package-client alice`                     |

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
course-start-in-devops/
‚îî‚îÄ‚îÄ task-2-vpn-server/
    ‚îî‚îÄ‚îÄ scripts/
        ‚îú‚îÄ‚îÄ openvpn-manager.sh          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        ‚îú‚îÄ‚îÄ sign-server-cert-simple.sh  # –ü–æ–¥–ø–∏—Å—å —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ CSR (–Ω–∞ CA)
        ‚îú‚îÄ‚îÄ sign-client-cert.sh         # –ü–æ–¥–ø–∏—Å—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö CSR (–Ω–∞ CA)
        ‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –Ω–∞ CA –∏ VPN‚Äë—Å–µ—Ä–≤–µ—Ä–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
* –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ CSR/CRT‚Äë—Ñ–∞–π–ª—ã —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–∞–º (`scp`, `rsync`, `VPN`).
* –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø–æ–¥–ø–∏—Å—å—é.

---

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ Skillbox *¬´Start in DevOps¬ª*.

---

